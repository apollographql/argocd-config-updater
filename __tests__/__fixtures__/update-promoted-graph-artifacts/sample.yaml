some-service-dev0:
  trackSupergraph: 'some-service:dev0'
  gitConfig:
    repoURL: https://github.com/apollographql/some-repo.git
    path: services/hello-world
    ref: 'abcdef' # this should change but stay double-quoted!
    trackMutableRef: pr-1234
  values:
    router:
      extraEnvVars:
        - name: NODE_IP
          valueFrom:
            fieldRef:
              fieldPath: status.hostIP
        - name: APOLLO_UPLINK_ENDPOINTS
          value: 'https://uplink-staging.api.apollographql.com/,https://aws-staging.uplink.api.apollographql.com/'
        - name: APOLLO_USAGE_REPORTING_INGRESS_URL
          # Same as Staging (THIS MUST NOT BE CHANGED)
          value: 'https://usage-reporting.api.staging.c0.gql.zone/api/ingress/traces'
        - name: APOLLO_USAGE_REPORTING_OTLP_INGRESS_URL
          value: 'https://usage-reporting.api.staging.c0.gql.zone'
        - name: GRAPH_ARTIFACT_REFERENCE
          value: 'artifacts-staging.api.apollographql.com/some-service@sha256:1234'

some-service-dev1:
  trackSupergraph: 'some-service:dev1'
  gitConfig:
    repoURL: https://github.com/apollographql/some-repo.git
    path: services/hello-world
    ref: 'abcdef' # this should change but stay single-quoted!
    trackMutableRef: pr-1234
  values:
    router:
      extraEnvVars:
        - name: NODE_IP
          valueFrom:
            fieldRef:
              fieldPath: status.hostIP
        - name: APOLLO_UPLINK_ENDPOINTS
          value: 'https://uplink-staging.api.apollographql.com/,https://aws-staging.uplink.api.apollographql.com/'
        - name: APOLLO_USAGE_REPORTING_INGRESS_URL
          # Same as Staging (THIS MUST NOT BE CHANGED)
          value: 'https://usage-reporting.api.staging.c0.gql.zone/api/ingress/traces'
        - name: APOLLO_USAGE_REPORTING_OTLP_INGRESS_URL
          value: 'https://usage-reporting.api.staging.c0.gql.zone'
        - name: GRAPH_ARTIFACT_REFERENCE
          value: 'artifacts-staging.api.apollographql.com/some-service@sha256:1234'

some-service-staging:
  trackSupergraph: 'some-service:staging'
  gitConfig:
    repoURL: https://github.com/apollographql/some-repo.git
    path: services/hello-world
    trackMutableRef: main
    ref: 01234a #this can stay unquoted because it won't look like a number
  values:
    router:
      extraEnvVars:
        - name: NODE_IP
          valueFrom:
            fieldRef:
              fieldPath: status.hostIP
        - name: APOLLO_UPLINK_ENDPOINTS
          value: 'https://uplink-staging.api.apollographql.com/,https://aws-staging.uplink.api.apollographql.com/'
        - name: APOLLO_USAGE_REPORTING_INGRESS_URL
          # Same as Staging (THIS MUST NOT BE CHANGED)
          value: 'https://usage-reporting.api.staging.c0.gql.zone/api/ingress/traces'
        - name: APOLLO_USAGE_REPORTING_OTLP_INGRESS_URL
          value: 'https://usage-reporting.api.staging.c0.gql.zone'
        - name: GRAPH_ARTIFACT_REFERENCE
          value: 'artifacts-staging.api.apollographql.com/some-service@sha256:1234'

some-service-prod:
  trackSupergraph: 'some-service:prod'
  gitConfig:
    repoURL: https://github.com/apollographql/some-repo.git
    path: services/hello-world
    ref: abcdef1234 # NO TOUCHING! No tracking.
  values:
    router:
      extraEnvVars:
        - name: NODE_IP
          valueFrom:
            fieldRef:
              fieldPath: status.hostIP
        - name: APOLLO_UPLINK_ENDPOINTS
          value: 'https://uplink-staging.api.apollographql.com/,https://aws-staging.uplink.api.apollographql.com/'
        - name: APOLLO_USAGE_REPORTING_INGRESS_URL
          # Same as Staging (THIS MUST NOT BE CHANGED)
          value: 'https://usage-reporting.api.staging.c0.gql.zone/api/ingress/traces'
        - name: APOLLO_USAGE_REPORTING_OTLP_INGRESS_URL
          value: 'https://usage-reporting.api.staging.c0.gql.zone'
        - name: GRAPH_ARTIFACT_REFERENCE
          value: 'artifacts-staging.api.apollographql.com/some-service@sha256:1234'

another:
  trackSupergraph: 'some-service:another'
  gitConfig:
    repoURL: https://github.com/apollographql/some-repo.git
    path: services/hello-world
    ref: abcdef # this becomes a number and will definitely need to be quoted
    trackMutableRef: make-it-numeric
  values:
    router:
      extraEnvVars:
        - name: NODE_IP
          valueFrom:
            fieldRef:
              fieldPath: status.hostIP
        - name: APOLLO_UPLINK_ENDPOINTS
          value: 'https://uplink-staging.api.apollographql.com/,https://aws-staging.uplink.api.apollographql.com/'
        - name: APOLLO_USAGE_REPORTING_INGRESS_URL
          # Same as Staging (THIS MUST NOT BE CHANGED)
          value: 'https://usage-reporting.api.staging.c0.gql.zone/api/ingress/traces'
        - name: APOLLO_USAGE_REPORTING_OTLP_INGRESS_URL
          value: 'https://usage-reporting.api.staging.c0.gql.zone'
        - name: GRAPH_ARTIFACT_REFERENCE
          value: 'artifacts-staging.api.apollographql.com/some-service@sha256:1234'

some-service-top-level:
  trackSupergraph: 'some-service:top-level'
  track: pr-1234
  gitConfig:
    repoURL: https://github.com/apollographql/some-repo.git
    path: services/hello-world
    ref: 'abcdef' # this should change but stay double-quoted!
  values:
    router:
      extraEnvVars:
        - name: NODE_IP
          valueFrom:
            fieldRef:
              fieldPath: status.hostIP
        - name: APOLLO_UPLINK_ENDPOINTS
          value: 'https://uplink-staging.api.apollographql.com/,https://aws-staging.uplink.api.apollographql.com/'
        - name: APOLLO_USAGE_REPORTING_INGRESS_URL
          # Same as Staging (THIS MUST NOT BE CHANGED)
          value: 'https://usage-reporting.api.staging.c0.gql.zone/api/ingress/traces'
        - name: APOLLO_USAGE_REPORTING_OTLP_INGRESS_URL
          value: 'https://usage-reporting.api.staging.c0.gql.zone'
        - name: GRAPH_ARTIFACT_REFERENCE
          value: 'artifacts-staging.api.apollographql.com/some-service@sha256:1234'
